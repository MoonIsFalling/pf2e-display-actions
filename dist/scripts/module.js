var r=Object.defineProperty;var u=(i,n,e)=>n in i?r(i,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[n]=e;var s=(i,n,e)=>(u(i,typeof n!="symbol"?n+"":n,e),e);const m="pf2e-display-actions",o=m;class d extends Application{constructor(){super();s(this,"clickString","symbolClick");s(this,"actionImage",`modules/${o}/images/action.png`);s(this,"reactionImage",`modules/${o}/images/reaction.png`);s(this,"numOfActions",3);s(this,"numOfReactions",1)}get title(){return game.i18n.localize("DisplayActions2e.WindowTitle")}static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{id:"DisplayActions2e",template:`modules/${o}/templates/result.hbs`,width:600,height:200,resizable:!0,title:"DisplayActions2e.WindowTitle"})}getData(){return{numOfActions:this.numOfActions,numOfReactions:this.numOfReactions,actionImagePayload:this.buildHandlebarPayload(this.numOfActions,{actionImage:this.actionImage}),reactionImagePayload:this.buildHandlebarPayload(this.numOfReactions,{reactionImage:this.reactionImage})}}activateListeners(e){super.activateListeners(e),e.find("img.symbol").on("click",this._onClickSymbolImage.bind(this)),e.find("input.input-counter").on("change",this._onChangeCountNumber.bind(this))}_onClickSymbolImage(e){e.preventDefault();const t=e.currentTarget;t!=null&&(t.className===void 0||t.className===null||(t.className.includes(this.clickString)?t.className=t.className.replace(this.clickString,""):t.className=t.className.concat(" ",this.clickString)))}buildHandlebarPayload(e,t){let a=[];for(let c=0;c<e;c++)a.push(t);return a}_onChangeCountNumber(e){e.preventDefault();const t=e.currentTarget,a=parseInt(t.value);if(console.log(a),!isNaN(a)&&a>=0){switch(t.id){case"count-action":this.numOfActions=a;break;case"count-reaction":this.numOfReactions=a;break;default:console.error(`${o} incorrectly handled number of actions!`)}this.render()}}}let l;Handlebars.registerHelper("times",function(i,n){let e="";for(let t=0;t<i;++t)e+=n.fn(t);return e});Handlebars.registerHelper("timesImages",function(i,n){let e="";for(let t=0;t<i;++t)e+=n.fn(t,n.data);return e});Hooks.once("init",()=>{console.log(`Initializing ${o}`),l=game.modules.get(o),l.displayActions2e=new d});Hooks.on("getSceneControlButtons",i=>{console.log("peter"),console.log(i);let n=i.find(e=>e.name==="token");n==null||n.tools.push({name:"DisplayActions2e.ButtonName",title:"DisplayActions2e.ButtonHint",icon:game.i18n.localize("DisplayActions2e.ButtonIcon"),button:!0,onClick:async()=>{var e;l.displayActions2e.render(!0),(e=game.socket)==null||e.emit("module.DisplayActions2e",{event:"DisplayActions2e"})}})});
//# sourceMappingURL=module.js.map
